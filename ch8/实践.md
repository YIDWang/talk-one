### 背景
在我们服务中经常遇到 redis 耗时在 100 到 200 ms 之间，在学习完整个课程之后准备上手排查这个问题，查看当前的瓶颈点在哪里？

### 问题发现
* 借助系统监控：redis 的 set/get 操作耗时在 100 到 200 ms 之间。

### 问题排查

### 系统负载
* 使用 top 命令观测大盘，机器 cpu idle 在 90% 以上，内存空闲在 40% 以上，未发现异常。
* 使用 pidstat 观测系统进程 磁盘 ，网络，内存，cpu 等情况未发现异常。
* 查看机器网卡 netstat -i ：未发现异常
* 查看网络层 netstat -s ：未发现异常


### 细节追踪

通过监控和日志发现 get 命令读取的 value 比较大，有 110kb 之多。按照我们机器百兆网卡来算传输一次需要 1ms 左右（110kb /100 mb；cp 一次传输最多 MSS  1500 b ，需要传输 70 次；单次网络传输时间为 0.1 ms 。大约经过 5 台机器转发。

一次交互时间消耗为： 70 * 0.1 + 1 * 8 = 14 ms

这只是粗略的计算方式，在redis集群内部数据的流转，读取，缓存的穿透等等问题，后续带来的延迟远远比 14 ms 大的多。


### 总结

通过这次问题排查对于redis的排查，通过系统大盘分析并未发现问题，通过理论的分析结合监控和实际数据得出，由于 value 过大 引发的长耗时问题。